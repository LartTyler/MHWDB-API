parameters:
    app.security.user_repository: App\Entity\User

services:
    _defaults:
        public: false
        autowire: true
        autoconfigure: true

    DaybreakStudios\VeritasBundle\Security\Core\User\JWTEntityUserProvider:
        public: true
        arguments:
            - '@doctrine'
            - '%app.security.user_repository%'

    DaybreakStudios\RestApiCommon\Event\Listeners\LexikJwtAuthenticationFailureSubscriber:
        tags:
            - name: kernel.event_subscriber

    App\Security\CustomizePayloadListener:
        tags:
            -
                name: kernel.event_listener
                event: lexik_jwt_authentication.on_jwt_created
                method: onJwtCreate

    App\Security\DisabledUserChecker: ~